{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/niklasmoss/Documents/work/Houe/code/plastic-recycling-app/components/AuthorizationButton.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect } from \"react\";\nimport * as WebBrowser from \"expo-web-browser\";\nimport { CodeChallengeMethod, exchangeCodeAsync, Prompt, useAuthRequest, useAutoDiscovery } from \"expo-auth-session\";\nimport Button from \"react-native-web/dist/exports/Button\";\nWebBrowser.maybeCompleteAuthSession();\nexport default function AuthorizationButton() {\n  var discovery = useAutoDiscovery(\"https://login.microsoftonline.com/65fa44cb-fe68-4b06-ad9f-d4343bd7589f/v2.0\");\n\n  var _useAuthRequest = useAuthRequest({\n    clientId: \"a67a4317-87b9-403b-8db9-e0227117bc8a\",\n    scopes: [\"openid\", \"profile\", \"email\", \"offline_access\"],\n    redirectUri: \"http://localhost:19006/one\",\n    prompt: Prompt.Login,\n    codeChallenge: \"ThisIsntRandomButItNeedsToBe43CharactersLong\",\n    codeChallengeMethod: CodeChallengeMethod.Plain\n  }, discovery),\n      _useAuthRequest2 = _slicedToArray(_useAuthRequest, 3),\n      request = _useAuthRequest2[0],\n      response = _useAuthRequest2[1],\n      promptAsync = _useAuthRequest2[2];\n\n  useEffect(function () {\n    console.log(\"Response changed and is now: \");\n    console.log(response);\n  }, [response]);\n  useEffect(function () {\n    console.log(\"Request change and is now: \");\n    console.log(request);\n  }, [request]);\n\n  var onPress = function onPress() {\n    var authSessionResult, test;\n    return _regeneratorRuntime.async(function onPress$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(promptAsync());\n\n          case 2:\n            authSessionResult = _context.sent;\n            console.log(authSessionResult);\n\n            if (authSessionResult && authSessionResult.type === \"success\" && discovery) {\n              test = exchangeCodeAsync({\n                code: authSessionResult.params.code,\n                scopes: [\"openid\", \"profile\", \"email\", \"offline_access\"],\n                clientId: \"a67a4317-87b9-403b-8db9-e0227117bc8a\",\n                redirectUri: \"http://localhost:19006/one\",\n                extraParams: {\n                  code_verifier: \"ThisIsntRandomButItNeedsToBe43CharactersLong\"\n                }\n              }, discovery).then(function (tokenResponse) {\n                debugger;\n                console.log(\"THE TOKEN RESPONSE: \");\n                console.log(tokenResponse);\n              }).catch(function (error) {\n                debugger;\n                console.log(\"ERROR: \");\n                console.log(error);\n              });\n              console.log(test);\n            }\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(Button, {\n    title: \"Login test\",\n    onPress: onPress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 10\n    }\n  });\n}","map":{"version":3,"sources":["/Users/niklasmoss/Documents/work/Houe/code/plastic-recycling-app/components/AuthorizationButton.tsx"],"names":["React","useEffect","WebBrowser","CodeChallengeMethod","exchangeCodeAsync","Prompt","useAuthRequest","useAutoDiscovery","maybeCompleteAuthSession","AuthorizationButton","discovery","clientId","scopes","redirectUri","prompt","Login","codeChallenge","codeChallengeMethod","Plain","request","response","promptAsync","console","log","onPress","authSessionResult","type","test","code","params","extraParams","code_verifier","then","tokenResponse","catch","error"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,UAAZ,MAA4B,kBAA5B;AACA,SACEC,mBADF,EAEEC,iBAFF,EAGEC,MAHF,EAIEC,cAJF,EAKEC,gBALF,QAMO,mBANP;;AASAL,UAAU,CAACM,wBAAX;AAEA,eAAe,SAASC,mBAAT,GAA+B;AAE5C,MAAMC,SAAS,GAAGH,gBAAgB,CAChC,6EADgC,CAAlC;;AAF4C,wBAMHD,cAAc,CACrD;AACEK,IAAAA,QAAQ,EAAE,sCADZ;AAEEC,IAAAA,MAAM,EAAE,CAAC,QAAD,EAAW,SAAX,EAAsB,OAAtB,EAA+B,gBAA/B,CAFV;AAIEC,IAAAA,WAAW,EAAE,4BAJf;AAKEC,IAAAA,MAAM,EAAET,MAAM,CAACU,KALjB;AAMEC,IAAAA,aAAa,EAAE,8CANjB;AAOEC,IAAAA,mBAAmB,EAAEd,mBAAmB,CAACe;AAP3C,GADqD,EAerDR,SAfqD,CANX;AAAA;AAAA,MAMrCS,OANqC;AAAA,MAM5BC,QAN4B;AAAA,MAMlBC,WANkB;;AAwB5CpB,EAAAA,SAAS,CAAC,YAAM;AACdqB,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACD,GAHQ,EAGN,CAACA,QAAD,CAHM,CAAT;AAKAnB,EAAAA,SAAS,CAAC,YAAM;AACdqB,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAZ;AACD,GAHQ,EAGN,CAACA,OAAD,CAHM,CAAT;;AAKA,MAAMK,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACkBH,WAAW,EAD7B;;AAAA;AACRI,YAAAA,iBADQ;AAEdH,YAAAA,OAAO,CAACC,GAAR,CAAYE,iBAAZ;;AAEA,gBACEA,iBAAiB,IACjBA,iBAAiB,CAACC,IAAlB,KAA2B,SAD3B,IAEAhB,SAHF,EAIE;AACMiB,cAAAA,IADN,GACavB,iBAAiB,CAC5B;AACEwB,gBAAAA,IAAI,EAAEH,iBAAiB,CAACI,MAAlB,CAAyBD,IADjC;AAEEhB,gBAAAA,MAAM,EAAE,CAAC,QAAD,EAAW,SAAX,EAAsB,OAAtB,EAA+B,gBAA/B,CAFV;AAGED,gBAAAA,QAAQ,EAAE,sCAHZ;AAIEE,gBAAAA,WAAW,EAAE,4BAJf;AAKEiB,gBAAAA,WAAW,EAAE;AACXC,kBAAAA,aAAa,EAAE;AADJ;AALf,eAD4B,EAU5BrB,SAV4B,CAAjB,CAYVsB,IAZU,CAYL,UAACC,aAAD,EAAmB;AACvB;AACAX,gBAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYU,aAAZ;AACD,eAhBU,EAiBVC,KAjBU,CAiBJ,UAACC,KAAD,EAAW;AAChB;AACAb,gBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYY,KAAZ;AACD,eArBU,CADb;AAuBAb,cAAAA,OAAO,CAACC,GAAR,CAAYI,IAAZ;AACD;;AAhCa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAmCA,SAAO,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,YAAd;AAA2B,IAAA,OAAO,EAAEH,OAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACD","sourcesContent":["import React, { useEffect } from \"react\";\nimport * as WebBrowser from \"expo-web-browser\";\nimport {\n  CodeChallengeMethod,\n  exchangeCodeAsync,\n  Prompt,\n  useAuthRequest,\n  useAutoDiscovery,\n} from \"expo-auth-session\";\nimport { Button } from \"react-native\";\n\nWebBrowser.maybeCompleteAuthSession();\n\nexport default function AuthorizationButton() {\n  // Endpoint\n  const discovery = useAutoDiscovery(\n    \"https://login.microsoftonline.com/65fa44cb-fe68-4b06-ad9f-d4343bd7589f/v2.0\"\n  );\n  // Request\n  const [request, response, promptAsync] = useAuthRequest(\n    {\n      clientId: \"a67a4317-87b9-403b-8db9-e0227117bc8a\",\n      scopes: [\"openid\", \"profile\", \"email\", \"offline_access\"],\n      // For usage in managed apps using the proxy\n      redirectUri: \"http://localhost:19006/one\",\n      prompt: Prompt.Login,\n      codeChallenge: \"ThisIsntRandomButItNeedsToBe43CharactersLong\",\n      codeChallengeMethod: CodeChallengeMethod.Plain,\n      /* redirectUri: makeRedirectUri({\n        // For usage in bare and standalone\n        native: 'houe-plastic-recycling://react-native-auth/',\n      }),\n       */\n    },\n    discovery\n  );\n\n  useEffect(() => {\n    console.log(\"Response changed and is now: \");\n    console.log(response);\n  }, [response]);\n\n  useEffect(() => {\n    console.log(\"Request change and is now: \");\n    console.log(request);\n  }, [request]);\n\n  const onPress = async () => {\n    const authSessionResult = await promptAsync();\n    console.log(authSessionResult);\n\n    if (\n      authSessionResult &&\n      authSessionResult.type === \"success\" &&\n      discovery\n    ) {\n      const test = exchangeCodeAsync(\n        {\n          code: authSessionResult.params.code,\n          scopes: [\"openid\", \"profile\", \"email\", \"offline_access\"],\n          clientId: \"a67a4317-87b9-403b-8db9-e0227117bc8a\",\n          redirectUri: \"http://localhost:19006/one\",\n          extraParams: {\n            code_verifier: \"ThisIsntRandomButItNeedsToBe43CharactersLong\",\n          },\n        },\n        discovery\n      )\n        .then((tokenResponse) => {\n          debugger;\n          console.log(\"THE TOKEN RESPONSE: \");\n          console.log(tokenResponse);\n        })\n        .catch((error) => {\n          debugger;\n          console.log(\"ERROR: \");\n          console.log(error);\n        });\n      console.log(test);\n    }\n  };\n\n  return <Button title=\"Login test\" onPress={onPress} />;\n}\n"]},"metadata":{},"sourceType":"module"}